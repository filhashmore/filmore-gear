<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FILMORE Gear Inventory</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="f-only-white.png">
  <link rel="apple-touch-icon" href="f-only-white.png">

  <!-- Open Graph / Social Share -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="FILMORE Gear Inventory">
  <meta property="og:description" content="Production Management System for touring gear and equipment tracking">
  <meta property="og:image" content="og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="FILMORE Gear Inventory">
  <meta name="twitter:description" content="Production Management System for touring gear and equipment tracking">
  <meta name="twitter:image" content="og-image.png">

  <!-- Theme Color -->
  <meta name="theme-color" content="#0a0a0a">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          colors: {
            dark: { 900: '#0a0a0a', 800: '#141414', 700: '#1f1f1f', 600: '#2a2a2a' }
          }
        }
      }
    }
  </script>
  <style>
    * { scrollbar-width: thin; scrollbar-color: #404040 #1f1f1f; }
    *::-webkit-scrollbar { width: 8px; height: 8px; }
    *::-webkit-scrollbar-track { background: #1f1f1f; }
    *::-webkit-scrollbar-thumb { background: #404040; border-radius: 4px; }
    .modal-backdrop { backdrop-filter: blur(8px); }
  </style>
</head>
<body class="bg-dark-900 text-gray-100 font-sans">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo, useCallback } = React;

    // ============ INITIAL DATA ============
    const INITIAL_DATA = {
      inventory: [
        { id: '001', name: 'Hardware Case', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Hardware', make: '', notes: '', category: 'inventory' },
        { id: '002', name: 'Camo Bag', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Camo Bag', make: '', notes: '', category: 'inventory' },
        { id: '003', name: 'Wireless Mic Peli', status: 'Maintenance', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: '', category: 'inventory' },
        { id: '004', name: 'Yellow Peli - Green Room', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', category: 'inventory' },
        { id: '005', name: 'Cone Bag', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', category: 'inventory' },
        { id: '006', name: 'Sand Bag', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', category: 'inventory' },
        { id: '007', name: 'Cable Case', status: 'Good', price: '', stock: 1, showType: 'Storage', packLocation: 'Floating', make: '', notes: '', category: 'inventory' },
        { id: '009', name: 'Tyler - In-Ear Monitors', status: 'Unknown', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Tyler Backpack', make: '', notes: '', category: 'inventory' },
        { id: '010', name: 'FILMORE Acoustic GTR', status: 'Maintenance', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: 'AC GTR Case handle broken', category: 'inventory' },
        { id: '011', name: 'IFAK - Med Kit', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Floating', make: '', notes: 'Green Peli for Fly', category: 'inventory' },
      ],
      consumables: [
        { id: '500', name: 'Black Gaff Tape', status: 'Needed', price: '$20.00', needed: 2, category: 'Tape', make: 'https://www.sweetwater.com/store/detail/Gaff255Blk', notes: 'General Purpose - Set Lists, safety, stage fixes', sheetCategory: 'consumables' },
        { id: '501', name: 'Electrical Tape', status: 'Need Soon', price: '$2.00', needed: 7, category: 'Tape', make: 'https://a.co/d/6OBcCQf', notes: 'Repair and Securement Purposes - cable management', sheetCategory: 'consumables' },
        { id: '502', name: 'Spike Tape', status: 'Additional', price: '$8.00', needed: 1, category: 'Tape', make: 'https://www.sweetwater.com/store/detail/Spike1220M5FL', notes: 'Safety Purpose - stage, walkways, backstage', sheetCategory: 'consumables' },
        { id: '503', name: 'Duracell Procell AA Battery - 24', status: 'Full Stock', price: '$18.00', needed: 0, category: 'Batteries', make: 'https://a.co/d/55lOFq9', notes: 'For Wireless - Rehearsal, Soundcheck, & Show. 12 per show minimum req.', sheetCategory: 'consumables' },
        { id: '504', name: 'Duracell Procell 9V Battery - 12', status: 'Needed', price: '$26.00', needed: 1, category: 'Batteries', make: 'https://a.co/d/fZtOW3D', notes: 'For Acoustic Guitar', sheetCategory: 'consumables' },
        { id: '505', name: '25ft FOH XLRs', status: 'Needed', price: '$70.00', needed: 4, category: 'Audio', make: 'https://www.sweetwater.com/store/detail/MCPXLR25', notes: 'For Left Right Sub & Fills FOH channels', sheetCategory: 'consumables' },
        { id: '506', name: 'Guitar Strings', status: 'Additional', price: '$21.00', needed: 1, category: 'Band', make: 'https://www.sweetwater.com/store/detail/ECG26', notes: 'Back Ups for Reid just in case', sheetCategory: 'consumables' },
        { id: '507', name: 'Clear Masking Tape', status: 'Additional', price: '$10.00', needed: 1, category: 'Audio', make: '', notes: 'For tour prep: Numbering pack items', sheetCategory: 'consumables' },
      ],
      acquisitions: [
        { id: '111', name: 'FOH Snakes w/ subsnake [rental]', rentOwn: 'Rental', status: 'Needed', buyPrice: 'N/A', rentalCost: '~$200/week', needed: 1, category: 'Audio', make: 'https://www.whirlwindusa.com/products/snakes-splitters-and-multiwiring-systems-snakes-mini-6-and-mini-12-elite', notes: 'FOH Snake, Spare, channels for LTC/FOH talkback/Stage Talkbacks. [+ Snakebox]', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '112', name: 'Clear Com [rental]', rentOwn: 'Rental', status: 'Needed', buyPrice: 'N/A', rentalCost: '~$50/week', needed: 1, category: 'Audio', make: '', notes: 'Telephone style communication unit ran on Ethercon (will use back up FOH snake).', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '113', name: 'GTR bgvs Mic - Beta 58', rentOwn: 'Own', status: 'In the works', buyPrice: '$179.00', rentalCost: 'N/A', needed: 1, category: 'Band', make: '', notes: 'So to have the other wireless mic as MAIN SPARE.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '114', name: 'EGT Wireless + Re-amp Boxes', rentOwn: 'Rental, Own', status: 'Additional', buyPrice: 'N/A', rentalCost: '~$100/week', needed: 1, category: 'Band', make: '', notes: 'Will not fit in Joels Rig due to RF Combiner input number limits.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '115', name: 'EGT subsnake w/ returns', rentOwn: 'Rental, Own', status: 'Additional', buyPrice: 'N/A', rentalCost: '~$25/week', needed: 1, category: 'Band', make: '', notes: 'Need to figure out wireless first. Headliner open channels?', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '116', name: 'FOH Apollo 8x Interface', rentOwn: 'Own, Rental', status: 'Additional', buyPrice: '$3,000.00', rentalCost: '?', needed: 1, category: 'Audio', make: 'https://www.uaudio.com/products/apollo-x8', notes: 'For making the mix more palatable & compatible for large PA systems.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '117', name: 'Drum Bleed PSE Unit', rentOwn: 'Own, Rental', status: 'Needed', buyPrice: '$1,050.00', rentalCost: '?', needed: 1, category: 'Audio', make: 'https://www.sweetwater.com/store/detail/545--rupert-neve-designs-545-primary-source-enhancer', notes: 'For getting Drums/cymbals out of the main mic. Can benefit Mons & FOH.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '118', name: 'Squawk Box', rentOwn: 'Own', status: 'Needed', buyPrice: '$179.00', rentalCost: 'N/A', needed: 1, category: 'Band', make: 'https://galaxyaudio.com/products/nspa/', notes: 'For Talkbacks at FOH.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '119', name: 'Wired Earpack for Drums', rentOwn: 'Own', status: 'Additional', buyPrice: '$136.00', rentalCost: 'N/A', needed: 1, category: 'Band', make: 'https://www.sweetwater.com/store/detail/HP2--presonus-hp2-personal-headphone-amplifier', notes: 'Whirlwind - PW-1 Personal Wedge.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '120', name: 'FOH RTA Mic', rentOwn: 'Own', status: 'Additional', buyPrice: '$35.00', rentalCost: 'N/A', needed: 1, category: 'Audio', make: 'https://a.co/d/bZrva6X', notes: 'For Tuning the PA.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '121', name: '1/4 TRS Cables for Apollo', rentOwn: 'Own', status: 'Additional', buyPrice: '$79.95', rentalCost: 'N/A', needed: 4, category: 'Audio', make: 'https://a.co/d/aZehQjh', notes: 'From FOH board to apollo, then back to board (2 pairs of LR).', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '122', name: 'Wired Keyboard & Mouse - FOH', rentOwn: 'Own', status: 'Additional', buyPrice: '$29.99', rentalCost: 'N/A', needed: 1, category: 'Audio', make: 'https://a.co/d/3xffpZZ', notes: 'For FOH Computer (for Apollo).', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '123', name: 'Radios', rentOwn: 'Own, Rental', status: 'Acquire ASAP', buyPrice: 'N/A', rentalCost: '~$75/week', needed: 3, category: 'Tour', make: 'https://www.radiodepot.com/products/rca-rdr2500-radio', notes: '3 minimum, 5 would be nice (FOH, MON, TM, Stage, Bus). [Professionalism] [UHF w/ Speaker mic]', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '125', name: 'Custom FILMORE Picks', rentOwn: 'Own', status: 'Un-Necessary', buyPrice: 'N/A', rentalCost: 'N/A', needed: 3, category: 'Band', make: '', notes: 'Acoustic and EGT', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '126', name: 'Spare GTR Strings', rentOwn: 'Own', status: 'Un-Necessary', buyPrice: 'N/A', rentalCost: 'N/A', needed: 2, category: 'Band', make: '', notes: 'Acoustic and EGT', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '127', name: 'Pro Sandbag - Black w/ handle', rentOwn: 'Own', status: 'Needed', buyPrice: '$63.00', rentalCost: 'N/A', needed: 1, category: 'Audio', make: 'https://www.fullcompass.com/prod/134838-global-truss-gt-sb25-25-lbs-filled-sand-bag', notes: 'For holding down wireless antenne.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '128', name: 'Isolator', rentOwn: 'Own', status: 'Acquire ASAP', buyPrice: '$62.00', rentalCost: 'N/A', needed: 2, category: 'Audio', make: 'https://a.co/d/2pCdgQK', notes: 'EGT Channel buzz', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '129', name: 'Power extension for lights', rentOwn: 'Rental, Own', status: 'Additional', buyPrice: 'N/A', rentalCost: '~$45/week', needed: 5, category: 'Lighting', make: '', notes: 'For a big tour, smart to get these for powering lighting easier to access upstage.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '130', name: 'Cable Protector Ramp', rentOwn: 'Own', status: 'Needed', buyPrice: '$30.00', rentalCost: 'N/A', needed: 2, category: 'Audio', make: 'https://www.cabletiesandmore.com/atlas-medium-duty-cable-protectors', notes: 'For FOH Snake on stage, from drum riser to side stage.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '131', name: 'Drum Cover', rentOwn: 'Own', status: 'Needed', buyPrice: '$27.00', rentalCost: 'N/A', needed: 2, category: 'Tour', make: 'https://a.co/d/aAe5Mai', notes: 'Black - lightweight sheet - Covers Filmore logo on kick drum for opener', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '132', name: 'Drum Subsnake + Fanout [rental]', rentOwn: 'Rental, Own', status: 'Additional', buyPrice: 'N/A', rentalCost: '?', needed: 1, category: 'Audio', make: 'https://www.whirlwindusa.com/products/snakes-splitters-and-multiwiring-systems-dt-12-mini-12-dt', notes: 'Multi pin connection', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '133', name: 'Digital Clock for stage', rentOwn: 'Own', status: 'Acquire ASAP', buyPrice: '$24.00', rentalCost: 'N/A', needed: 1, category: 'Band', make: 'https://a.co/d/7Plw3sb', notes: 'Unknown quality', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '134', name: 'FOH Mastering Plug-Ins', rentOwn: 'Own', status: 'Additional', buyPrice: '$522.00', rentalCost: 'N/A', needed: 1, category: 'Audio', make: 'https://www.uaudio.com/products/api-2500-bus-compressor', notes: 'Making it sound like the record in recordings. Most desired for big PA systems.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '135', name: 'Additional Pelican Case', rentOwn: 'Own', status: 'Additional', buyPrice: '$100.00', rentalCost: 'N/A', needed: 2, category: 'Audio', make: '', notes: 'Once we see what new gear we have we will shop for these. Harbor Freight.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '136', name: 'FOH Rack', rentOwn: 'Own, Rental', status: 'Additional', buyPrice: '$500.00', rentalCost: '?', needed: 1, category: 'Audio', make: 'https://www.musiciansfriend.com/accessories/prox-truss-12u-space-amp-rack-mount-ata-flight-case-19-depth-w-casters/l28129000000000', notes: 'Or similar, but need height for use as FOH table', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '137', name: 'New Tour Laminates', rentOwn: 'Own', status: 'Additional', buyPrice: 'N/A', rentalCost: 'N/A', needed: 1, category: 'Tour', make: '', notes: 'N/A', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '138', name: 'Pick Holder', rentOwn: 'Own', status: 'Needed', buyPrice: '$7.00', rentalCost: 'N/A', needed: 4, category: 'Band', make: 'https://a.co/d/gFb6Zjx', notes: 'N/A', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '139', name: 'GTR Tech Workstation Case', rentOwn: 'Own', status: 'Additional', buyPrice: '$1,000.00', rentalCost: 'N/A', needed: 1, category: 'Band', make: 'https://www.alcorncustomcase.com/', notes: 'Could probably find one similar, alcorncustomcase.com makes custom ones too.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '140', name: 'Redundant Trax Computer', rentOwn: 'Own', status: 'Needed', buyPrice: '$1,200.00', rentalCost: 'N/A', needed: 1, category: 'Band', make: '', notes: 'Newer Macbook Pro.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '141', name: 'Ego Riser (with up-light?)', rentOwn: 'Own', status: 'Un-Necessary', buyPrice: 'N/A', rentalCost: 'N/A', needed: 2, category: 'Band', make: '', notes: 'We could probably get these made custom for not very much cost.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '142', name: 'Cable/Stands Trunk', rentOwn: 'Rental, Own', status: 'Un-Necessary', buyPrice: 'N/A', rentalCost: '?', needed: 1, category: 'Audio', make: '', notes: 'Long term item if bought. Could house a lot of our items.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '143', name: 'Trailer Straps', rentOwn: 'Own', status: 'Acquire ASAP', buyPrice: '$45.00', rentalCost: 'N/A', needed: 1, category: 'Tour', make: 'https://a.co/d/2wLhaZU', notes: 'Just in case the trailer company does not supply them.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '144', name: 'Load Bars for Trailer', rentOwn: 'Own, Rental', status: 'Needed', buyPrice: 'N/A', rentalCost: 'Trailer Company?', needed: 2, category: 'Tour', make: 'https://a.co/d/dMD24nk', notes: 'They go across the trailer to help secure gear.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '145', name: 'FOH TB Flexible mic clip', rentOwn: 'Own', status: 'Additional', buyPrice: '$12.00', rentalCost: 'N/A', needed: 1, category: 'Audio', make: 'https://a.co/d/8w6zWFn', notes: 'FOH engineer Talkback', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '146', name: 'Packing blanket for load bars', rentOwn: 'Own', status: 'Needed', buyPrice: '$65.00', rentalCost: 'N/A', needed: 1, category: 'Tour', make: '', notes: 'To wrap around load bars, and protect other gear and cases.', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '147', name: 'FOH USB Flexible Lamp', rentOwn: 'Own', status: 'Needed', buyPrice: '$30.00', rentalCost: 'N/A', needed: 1, category: 'Audio', make: '', notes: 'So I can see my FOH board in the dark..', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '148', name: 'StagePlotPro Application', rentOwn: 'Own', status: 'In the works', buyPrice: 'N/A', rentalCost: 'PM owns this.', needed: 1, category: 'Tour', make: '', notes: 'Creates Professional Stage Plots', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '149', name: 'Monitor pelican & FOH pelican', rentOwn: 'Own', status: 'Additional', buyPrice: '$260.00', rentalCost: 'N/A', needed: 2, category: 'Audio', make: 'https://www.sweetwater.com/store/detail/1SKBR4SW--skb-4u-rseries-shallow-rolling-rack-case', notes: 'To house the FOH items (apollo, etc) and MON items (PSE, Drawer).', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '150', name: 'Power Conditioner', rentOwn: 'Own, Rental', status: 'Additional', buyPrice: '$90.00', rentalCost: '?', needed: 2, category: 'Audio', make: 'https://www.sweetwater.com/store/detail/M8x2--furman-m-8x2-power-conditioner', notes: 'FOH Rack & Mon Rack', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '151', name: 'Guitar Capos', rentOwn: 'Own', status: 'Additional', buyPrice: 'N/A', rentalCost: 'N/A', needed: 2, category: 'Band', make: 'https://a.co/d/0Dwq1Iw', notes: 'ACG & EGT', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '152', name: 'Mon iPad Case - Quick Rig', rentOwn: 'Own', status: 'In the works', buyPrice: '$20.00', rentalCost: 'PM owns this', needed: 1, category: 'Audio', make: 'https://a.co/d/52Y83mZ', notes: 'Holds iPad and cable ties, e-tape', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '153', name: 'FOH Screen mounts', rentOwn: 'Own', status: 'Additional', buyPrice: '$70.00', rentalCost: 'N/A', needed: 2, category: 'Audio', make: 'https://a.co/d/a6fL7uC', notes: 'Gotta figure out how to mount it to joels rig', approval: 'pending', sheetCategory: 'acquisitions' },
        { id: '154', name: 'FOH Screen Pelican', rentOwn: 'Own', status: 'Additional', buyPrice: 'N/A', rentalCost: 'N/A', needed: 1, category: 'Audio', make: '', notes: 'For traveling FOH Screens', approval: 'pending', sheetCategory: 'acquisitions' },
      ],
      flyPack: [
        { id: '202', name: 'M32 Peli', checkedBag: 'Joel', carryOn: '', notes: '', sheetCategory: 'flyPack' },
        { id: '203', name: 'IEM Peli', checkedBag: 'Joel', carryOn: '', notes: '', sheetCategory: 'flyPack' },
        { id: '204', name: 'Playback Peli', checkedBag: '', carryOn: 'Joel', notes: '', sheetCategory: 'flyPack' },
        { id: '221', name: 'Cables Peli', checkedBag: 'Drew', carryOn: '', notes: '', sheetCategory: 'flyPack' },
        { id: '302', name: 'EGT Pedalboard', checkedBag: 'Reid', carryOn: '', notes: '', sheetCategory: 'flyPack' },
        { id: '215', name: 'Snare Case', checkedBag: 'Tyler', carryOn: '', notes: '', sheetCategory: 'flyPack' },
        { id: '217', name: 'Cymbals Case', checkedBag: 'Reid', carryOn: '', notes: '', sheetCategory: 'flyPack' },
        { id: '300', name: 'EGT 01', checkedBag: '', carryOn: 'Reid', notes: '', sheetCategory: 'flyPack' },
        { id: '010', name: 'FILMORE Acoustic GTR', checkedBag: '', carryOn: 'Tyler', notes: '', sheetCategory: 'flyPack' },
        { id: '403', name: 'Green Peli', checkedBag: '', carryOn: 'Drew', notes: '', sheetCategory: 'flyPack' },
      ],
      joelGear: [
        { id: '201', name: 'Drum Hardware Case', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '202', name: 'M32 Peli', status: 'Good', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'M32 Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '203', name: 'IEM Peli', status: 'Good', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'IEM Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '204', name: 'Playback Peli', status: 'Good', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Playback Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '205', name: 'Lighting Console Peli', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Lighting Console Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '206', name: 'Lighting Cable Peli', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Lighting Cable Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '207', name: 'Lighting Towers', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '208', name: 'Lighting Shorter Fixtures', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '209', name: 'FOH Board', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '210', name: 'FOH Snake Reel', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '211', name: 'FOH Snake', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '212', name: 'Drum Peli', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Drum Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '213', name: 'Kick Drum Case', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '214', name: 'Floor Tom Case', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '215', name: 'Snare Case', status: 'Good', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '216', name: 'Rack Tom Case', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '217', name: 'Cymbals Case', status: 'Good', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '218', name: 'Drum Cart', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '219', name: 'Joel - In-Ear Monitors', status: 'Unknown', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Joel Backpack', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '220', name: 'Trax/Lighting Computer', status: 'Maintenance', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
        { id: '221', name: 'Cables Peli', status: 'Good', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Cables Peli', make: '', notes: '', owner: 'Joel', sheetCategory: 'joelGear' },
      ],
      reidGear: [
        { id: '300', name: 'EGT 01', status: 'Maintenance', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Reid', sheetCategory: 'reidGear' },
        { id: '301', name: 'EGT 02', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Reid', sheetCategory: 'reidGear' },
        { id: '302', name: 'EGT Pedalboard', status: 'Maintenance', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Reid', sheetCategory: 'reidGear' },
        { id: '303', name: 'EGT Amp', status: 'Good', price: '', stock: 1, showType: 'DRIVE', packLocation: 'Floating', make: '', notes: '', owner: 'Reid', sheetCategory: 'reidGear' },
        { id: '304', name: 'Reid - In-Ear Monitors', status: 'Unknown', price: '', stock: 1, showType: 'FLY, DRIVE', packLocation: 'Reid Backpack', make: '', notes: '', owner: 'Reid', sheetCategory: 'reidGear' },
      ],
      drewGear: [
        { id: '400', name: 'FOH USB Stick', status: 'Good', price: '', stock: 3, showType: 'DRIVE, FLY', packLocation: 'Backpack', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '401', name: 'FOH SD Card', status: 'Maintenance', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Green Peli', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '402', name: 'FOH Computer', status: 'Good', price: '', stock: 2, showType: 'DRIVE, FLY', packLocation: 'Backpack', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '403', name: 'Green Peli', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Floating', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '404', name: 'FOH Cables', status: 'Damaged', price: '', stock: 3, showType: 'DRIVE', packLocation: 'Junk Bunk', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '405', name: 'Monitors iPad', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Backpack', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '406', name: 'Cable Tester', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Backpack', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '407', name: 'Drew - In-Ear Monitors', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Green Peli', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '408', name: 'Back-Up Universal In-Ear Monitors', status: 'Maintenance', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Green Peli', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '409', name: 'Printer', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Green Peli', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
        { id: '410', name: 'Band Hard Drive - SSD', status: 'Good', price: '', stock: 1, showType: 'DRIVE, FLY', packLocation: 'Green Peli', make: '', notes: '', owner: 'Drew', sheetCategory: 'drewGear' },
      ],
      rentals: [
        { id: 'R01', name: 'FOH Snake System', vendor: '', weeklyRate: '$200', status: 'Pending', startDate: '', endDate: '', notes: 'Main snake + subsnake', sheetCategory: 'rentals' },
        { id: 'R02', name: 'Clear Com System', vendor: '', weeklyRate: '$50', status: 'Pending', startDate: '', endDate: '', notes: 'Comm between FOH and Stage', sheetCategory: 'rentals' },
      ]
    };

    // ============ STATUS CONFIGURATIONS ============
    const STATUS_CONFIG = {
      'Good': { bg: 'bg-emerald-500/20', text: 'text-emerald-400', border: 'border-emerald-500/30' },
      'Maintenance': { bg: 'bg-amber-500/20', text: 'text-amber-400', border: 'border-amber-500/30' },
      'Unknown': { bg: 'bg-gray-500/20', text: 'text-gray-400', border: 'border-gray-500/30' },
      'Needed': { bg: 'bg-blue-500/20', text: 'text-blue-400', border: 'border-blue-500/30' },
      'Need Soon': { bg: 'bg-amber-500/20', text: 'text-amber-400', border: 'border-amber-500/30' },
      'Additional': { bg: 'bg-yellow-500/20', text: 'text-yellow-400', border: 'border-yellow-500/30' },
      'Full Stock': { bg: 'bg-emerald-500/20', text: 'text-emerald-400', border: 'border-emerald-500/30' },
      'In the works': { bg: 'bg-purple-500/20', text: 'text-purple-400', border: 'border-purple-500/30' },
      'Un-Necessary': { bg: 'bg-gray-500/20', text: 'text-gray-400', border: 'border-gray-500/30' },
      'Acquire ASAP': { bg: 'bg-red-500/20', text: 'text-red-400', border: 'border-red-500/30' },
      'Pending': { bg: 'bg-amber-500/20', text: 'text-amber-400', border: 'border-amber-500/30' },
      'Active': { bg: 'bg-emerald-500/20', text: 'text-emerald-400', border: 'border-emerald-500/30' },
      'Damaged': { bg: 'bg-red-500/20', text: 'text-red-400', border: 'border-red-500/30' },
    };

    const CATEGORY_CONFIG = {
      'Audio': { bg: 'bg-red-500/20', text: 'text-red-400' },
      'Band': { bg: 'bg-blue-500/20', text: 'text-blue-400' },
      'Tour': { bg: 'bg-purple-500/20', text: 'text-purple-400' },
      'Lighting': { bg: 'bg-yellow-500/20', text: 'text-yellow-400' },
      'Tape': { bg: 'bg-purple-500/20', text: 'text-purple-400' },
      'Batteries': { bg: 'bg-gray-500/20', text: 'text-gray-400' },
    };

    const APPROVAL_CONFIG = {
      'pending': { bg: 'bg-amber-500/20', text: 'text-amber-400', label: 'Pending' },
      'approved': { bg: 'bg-emerald-500/20', text: 'text-emerald-400', label: 'Approved' },
      'denied': { bg: 'bg-red-500/20', text: 'text-red-400', label: 'Denied' },
    };

    // Show Type colors - intuitive for touring context
    const SHOW_TYPE_CONFIG = {
      'DRIVE': { bg: 'bg-blue-500/20', text: 'text-blue-400', border: 'border-blue-500/30' },
      'FLY': { bg: 'bg-sky-500/20', text: 'text-sky-400', border: 'border-sky-500/30' },
      'FLY, DRIVE': { bg: 'bg-violet-500/20', text: 'text-violet-400', border: 'border-violet-500/30' },
      'DRIVE, FLY': { bg: 'bg-violet-500/20', text: 'text-violet-400', border: 'border-violet-500/30' },
      'Storage': { bg: 'bg-gray-500/20', text: 'text-gray-400', border: 'border-gray-500/30' },
    };

    // Pack Location colors - organized by storage type
    const LOCATION_CONFIG = {
      'Hardware': { bg: 'bg-orange-500/20', text: 'text-orange-400' },
      'Floating': { bg: 'bg-slate-500/20', text: 'text-slate-400' },
      'M32 Peli': { bg: 'bg-cyan-500/20', text: 'text-cyan-400' },
      'IEM Peli': { bg: 'bg-teal-500/20', text: 'text-teal-400' },
      'Playback Peli': { bg: 'bg-indigo-500/20', text: 'text-indigo-400' },
      'Cables Peli': { bg: 'bg-pink-500/20', text: 'text-pink-400' },
      'Green Peli': { bg: 'bg-emerald-500/20', text: 'text-emerald-400' },
      'Drum Peli': { bg: 'bg-red-500/20', text: 'text-red-400' },
      'Lighting Console Peli': { bg: 'bg-yellow-500/20', text: 'text-yellow-400' },
      'Lighting Cable Peli': { bg: 'bg-amber-500/20', text: 'text-amber-400' },
      'Camo Bag': { bg: 'bg-lime-500/20', text: 'text-lime-400' },
      'Tyler Backpack': { bg: 'bg-rose-500/20', text: 'text-rose-400' },
      'Joel Backpack': { bg: 'bg-blue-500/20', text: 'text-blue-400' },
      'Reid Backpack': { bg: 'bg-amber-500/20', text: 'text-amber-400' },
      'Backpack': { bg: 'bg-purple-500/20', text: 'text-purple-400' },
      'Junk Bunk': { bg: 'bg-stone-500/20', text: 'text-stone-400' },
    };

    // ============ ICON COMPONENT ============
    const Icon = ({ name, size = 20, className = '' }) => {
      const ref = React.useRef();
      useEffect(() => {
        if (ref.current && lucide[name]) {
          ref.current.innerHTML = '';
          const icon = lucide.createElement(lucide[name]);
          icon.setAttribute('width', size);
          icon.setAttribute('height', size);
          ref.current.appendChild(icon);
        }
      }, [name, size]);
      return <span ref={ref} className={className} />;
    };

    // ============ STATUS BADGE COMPONENT ============
    const StatusBadge = ({ status, size = 'sm' }) => {
      const config = STATUS_CONFIG[status] || STATUS_CONFIG['Unknown'];
      const sizeClasses = size === 'sm' ? 'px-2 py-0.5 text-xs' : 'px-3 py-1 text-sm';
      return (
        <span className={`inline-flex items-center rounded-full ${config.bg} ${config.text} ${sizeClasses} font-medium border ${config.border}`}>
          {status}
        </span>
      );
    };

    // ============ CATEGORY BADGE COMPONENT ============
    const CategoryBadge = ({ category }) => {
      const config = CATEGORY_CONFIG[category] || { bg: 'bg-gray-500/20', text: 'text-gray-400' };
      return (
        <span className={`inline-flex items-center rounded-full ${config.bg} ${config.text} px-2 py-0.5 text-xs font-medium`}>
          {category}
        </span>
      );
    };

    // ============ APPROVAL BADGE COMPONENT ============
    const ApprovalBadge = ({ approval }) => {
      const config = APPROVAL_CONFIG[approval] || APPROVAL_CONFIG['pending'];
      return (
        <span className={`inline-flex items-center rounded-full ${config.bg} ${config.text} px-2 py-0.5 text-xs font-medium`}>
          {config.label}
        </span>
      );
    };

    // ============ SHOW TYPE BADGE COMPONENT ============
    const ShowTypeBadge = ({ showType }) => {
      if (!showType) return <span className="text-gray-500 text-xs">N/A</span>;
      const config = SHOW_TYPE_CONFIG[showType] || { bg: 'bg-gray-500/20', text: 'text-gray-400', border: 'border-gray-500/30' };
      return (
        <span className={`inline-flex items-center rounded-full ${config.bg} ${config.text} ${config.border} border px-2 py-0.5 text-xs font-medium`}>
          {showType}
        </span>
      );
    };

    // ============ LOCATION BADGE COMPONENT ============
    const LocationBadge = ({ location }) => {
      if (!location) return <span className="text-gray-500 text-xs">N/A</span>;
      const config = LOCATION_CONFIG[location] || { bg: 'bg-gray-500/20', text: 'text-gray-400' };
      return (
        <span className={`inline-flex items-center rounded-full ${config.bg} ${config.text} px-2 py-0.5 text-xs font-medium`}>
          {location}
        </span>
      );
    };

    // ============ SORTABLE TABLE HEADER ============
    const SortableHeader = ({ label, sortKey, currentSort, onSort }) => {
      const isActive = currentSort.key === sortKey;
      const direction = isActive ? currentSort.direction : null;

      return (
        <th
          onClick={() => onSort(sortKey)}
          className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider cursor-pointer hover:text-white hover:bg-dark-600 transition-colors select-none"
        >
          <div className="flex items-center gap-1">
            {label}
            <span className="text-gray-600">
              {direction === 'asc' ? '↑' : direction === 'desc' ? '↓' : '↕'}
            </span>
          </div>
        </th>
      );
    };

    // ============ LOGIN SCREEN ============
    const LoginScreen = ({ onLogin }) => {
      const [code, setCode] = useState('');
      const [error, setError] = useState('');
      const [shake, setShake] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        if (code.toUpperCase() === 'PRESTON') {
          onLogin();
        } else {
          setError('Invalid access code');
          setShake(true);
          setTimeout(() => setShake(false), 500);
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center bg-dark-900 px-4">
          <div className={`w-full max-w-md ${shake ? 'animate-pulse' : ''}`}>
            <div className="text-center mb-8">
              <img src="f-only-white.png" alt="FILMORE" className="w-16 h-16 mx-auto mb-4" />
              <img src="filmore-logo-white.png" alt="FILMORE" className="h-8 mx-auto mb-2" />
              <p className="text-gray-400">Gear Inventory</p>
            </div>
            
            <form onSubmit={handleSubmit} className="bg-dark-700 rounded-2xl p-8 border border-dark-600">
              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-300 mb-2">Access Code</label>
                <input
                  type="password"
                  value={code}
                  onChange={(e) => { setCode(e.target.value); setError(''); }}
                  placeholder="Enter access code"
                  className="w-full px-4 py-3 bg-dark-800 border border-dark-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all"
                  autoFocus
                />
                {error && <p className="mt-2 text-sm text-red-400">{error}</p>}
              </div>
              <button
                type="submit"
                className="w-full py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 transition-all transform hover:scale-[1.02]"
              >
                Enter Inventory
              </button>
            </form>
            <p className="text-center text-gray-500 text-sm mt-6">Production Management System</p>
          </div>
        </div>
      );
    };

    // ============ MODAL COMPONENT ============
    const Modal = ({ isOpen, onClose, title, children, size = 'md' }) => {
      if (!isOpen) return null;
      const sizeClasses = { sm: 'max-w-md', md: 'max-w-2xl', lg: 'max-w-4xl', xl: 'max-w-6xl' };
      
      return (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop bg-black/60" onClick={onClose}>
          <div 
            className={`w-full ${sizeClasses[size]} bg-dark-800 rounded-2xl border border-dark-600 shadow-2xl max-h-[90vh] overflow-hidden`}
            onClick={e => e.stopPropagation()}
          >
            <div className="flex items-center justify-between px-6 py-4 border-b border-dark-600">
              <h3 className="text-lg font-semibold text-white">{title}</h3>
              <button onClick={onClose} className="p-2 text-gray-400 hover:text-white hover:bg-dark-700 rounded-lg transition-colors">
                <Icon name="X" size={20} />
              </button>
            </div>
            <div className="p-6 overflow-y-auto max-h-[calc(90vh-80px)]">
              {children}
            </div>
          </div>
        </div>
      );
    };

    // ============ ITEM DETAIL MODAL COMPONENT ============
    const ItemDetailModal = ({ item, isOpen, onClose, onEdit }) => {
      if (!isOpen || !item) return null;

      return (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop bg-black/60" onClick={onClose}>
          <div
            className="w-full max-w-lg bg-dark-800 rounded-2xl border border-dark-600 shadow-2xl overflow-hidden"
            onClick={e => e.stopPropagation()}
          >
            <div className="flex items-center justify-between px-6 py-4 border-b border-dark-600">
              <div>
                <h3 className="text-lg font-semibold text-white">{item.name}</h3>
                <span className="text-sm text-gray-500">ID: {item.id}</span>
              </div>
              <button onClick={onClose} className="p-2 text-gray-400 hover:text-white hover:bg-dark-700 rounded-lg transition-colors">
                <Icon name="X" size={20} />
              </button>
            </div>
            <div className="p-6 space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <span className="text-xs text-gray-500 uppercase">Rent/Own</span>
                  <p className="text-white font-medium">{item.rentOwn || '-'}</p>
                </div>
                <div>
                  <span className="text-xs text-gray-500 uppercase">Status</span>
                  <div className="mt-1"><StatusBadge status={item.status} /></div>
                </div>
              </div>
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <span className="text-xs text-gray-500 uppercase">Buy Price</span>
                  <p className="text-white font-medium">{item.buyPrice || '-'}</p>
                </div>
                <div>
                  <span className="text-xs text-gray-500 uppercase">Rental Cost</span>
                  <p className="text-white font-medium">{item.rentalCost || '-'}</p>
                </div>
              </div>
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <span className="text-xs text-gray-500 uppercase">Qty Needed</span>
                  <p className="text-white font-medium">{item.needed || '-'}</p>
                </div>
                <div>
                  <span className="text-xs text-gray-500 uppercase">Category</span>
                  <div className="mt-1">{item.category ? <CategoryBadge category={item.category} /> : '-'}</div>
                </div>
              </div>
              <div>
                <span className="text-xs text-gray-500 uppercase">Approval Status</span>
                <div className="mt-1"><ApprovalBadge approval={item.approval} /></div>
              </div>
              {item.make && (
                <div>
                  <span className="text-xs text-gray-500 uppercase">Product Link</span>
                  <a href={item.make} target="_blank" rel="noopener noreferrer" className="flex items-center gap-1 text-blue-400 hover:text-blue-300 mt-1">
                    <Icon name="ExternalLink" size={14} />
                    <span className="text-sm truncate">{item.make}</span>
                  </a>
                </div>
              )}
              {item.notes && (
                <div className="bg-dark-700 rounded-lg p-4">
                  <span className="text-xs text-gray-500 uppercase block mb-2">Notes</span>
                  <p className="text-gray-300 whitespace-pre-wrap">{item.notes}</p>
                </div>
              )}
            </div>
            <div className="px-6 py-4 border-t border-dark-600 flex justify-end gap-3">
              <button onClick={onClose} className="px-4 py-2 text-gray-400 hover:text-white transition-colors">Close</button>
              <button onClick={() => { onClose(); onEdit(item); }} className="px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2">
                <Icon name="Pencil" size={16} />
                Edit Item
              </button>
            </div>
          </div>
        </div>
      );
    };

    // ============ ITEM FORM COMPONENT ============
    const ItemForm = ({ item, type, onSave, onCancel }) => {
      const [formData, setFormData] = useState(item || {});

      const handleChange = (field, value) => {
        setFormData(prev => ({ ...prev, [field]: value }));
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        onSave(formData);
      };

      const renderFields = () => {
        switch (type) {
          case 'inventory':
            return (
              <>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">ID</label>
                    <input type="text" value={formData.id || ''} onChange={e => handleChange('id', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Item Name</label>
                    <input type="text" value={formData.name || ''} onChange={e => handleChange('name', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-3 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Status</label>
                    <select value={formData.status || ''} onChange={e => handleChange('status', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="Good">Good</option>
                      <option value="Maintenance">Maintenance</option>
                      <option value="Unknown">Unknown</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Stock</label>
                    <input type="number" value={formData.stock || ''} onChange={e => handleChange('stock', parseInt(e.target.value))} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Price</label>
                    <input type="text" value={formData.price || ''} onChange={e => handleChange('price', e.target.value)} placeholder="$0.00" className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-2 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Show Type</label>
                    <select value={formData.showType || ''} onChange={e => handleChange('showType', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="DRIVE">DRIVE</option>
                      <option value="FLY">FLY</option>
                      <option value="FLY, DRIVE">FLY, DRIVE</option>
                      <option value="Storage">Storage</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Pack Location</label>
                    <input type="text" value={formData.packLocation || ''} onChange={e => handleChange('packLocation', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
              </>
            );
          case 'consumables':
            return (
              <>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">ID</label>
                    <input type="text" value={formData.id || ''} onChange={e => handleChange('id', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Item Name</label>
                    <input type="text" value={formData.name || ''} onChange={e => handleChange('name', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-3 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Status</label>
                    <select value={formData.status || ''} onChange={e => handleChange('status', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="Full Stock">Full Stock</option>
                      <option value="Needed">Needed</option>
                      <option value="Need Soon">Need Soon</option>
                      <option value="Additional">Additional</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Qty Needed</label>
                    <input type="number" value={formData.needed || ''} onChange={e => handleChange('needed', parseInt(e.target.value))} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Price</label>
                    <input type="text" value={formData.price || ''} onChange={e => handleChange('price', e.target.value)} placeholder="$0.00" className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-2 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Category</label>
                    <select value={formData.category || ''} onChange={e => handleChange('category', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="Tape">Tape</option>
                      <option value="Batteries">Batteries</option>
                      <option value="Audio">Audio</option>
                      <option value="Band">Band</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Link/Make</label>
                    <input type="text" value={formData.make || ''} onChange={e => handleChange('make', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
              </>
            );
          case 'acquisitions':
            return (
              <>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">ID</label>
                    <input type="text" value={formData.id || ''} onChange={e => handleChange('id', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Item Name</label>
                    <input type="text" value={formData.name || ''} onChange={e => handleChange('name', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-3 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Rent/Own</label>
                    <select value={formData.rentOwn || ''} onChange={e => handleChange('rentOwn', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="Own">Own</option>
                      <option value="Rental">Rental</option>
                      <option value="Own, Rental">Own, Rental</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Status</label>
                    <select value={formData.status || ''} onChange={e => handleChange('status', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="Acquire ASAP">Acquire ASAP</option>
                      <option value="Needed">Needed</option>
                      <option value="In the works">In the works</option>
                      <option value="Additional">Additional</option>
                      <option value="Un-Necessary">Un-Necessary</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Qty Needed</label>
                    <input type="number" value={formData.needed || ''} onChange={e => handleChange('needed', parseInt(e.target.value))} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-2 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Buy Price</label>
                    <input type="text" value={formData.buyPrice || ''} onChange={e => handleChange('buyPrice', e.target.value)} placeholder="$0.00" className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Rental Cost</label>
                    <input type="text" value={formData.rentalCost || ''} onChange={e => handleChange('rentalCost', e.target.value)} placeholder="$/week" className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
                <div className="grid grid-cols-2 gap-4 mt-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Category</label>
                    <select value={formData.category || ''} onChange={e => handleChange('category', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500">
                      <option value="">Select...</option>
                      <option value="Audio">Audio</option>
                      <option value="Band">Band</option>
                      <option value="Tour">Tour</option>
                      <option value="Lighting">Lighting</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-400 mb-1">Link/Make</label>
                    <input type="text" value={formData.make || ''} onChange={e => handleChange('make', e.target.value)} className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500" />
                  </div>
                </div>
              </>
            );
          default:
            return null;
        }
      };

      return (
        <form onSubmit={handleSubmit}>
          {renderFields()}
          <div className="mt-4">
            <label className="block text-sm text-gray-400 mb-1">Notes</label>
            <textarea 
              value={formData.notes || ''} 
              onChange={e => handleChange('notes', e.target.value)} 
              rows={3}
              className="w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:ring-2 focus:ring-amber-500 resize-none"
            />
          </div>
          <div className="flex justify-end gap-3 mt-6 pt-4 border-t border-dark-600">
            <button type="button" onClick={onCancel} className="px-4 py-2 text-gray-400 hover:text-white transition-colors">Cancel</button>
            <button type="submit" className="px-6 py-2 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors">Save Item</button>
          </div>
        </form>
      );
    };

    // ============ STAT CARD COMPONENT ============
    const StatCard = ({ icon, label, value, color = 'amber', trend, onClick }) => {
      const colorClasses = {
        amber: 'from-amber-500/20 to-orange-500/20 border-amber-500/30',
        emerald: 'from-emerald-500/20 to-teal-500/20 border-emerald-500/30',
        blue: 'from-blue-500/20 to-indigo-500/20 border-blue-500/30',
        red: 'from-red-500/20 to-rose-500/20 border-red-500/30',
        purple: 'from-purple-500/20 to-violet-500/20 border-purple-500/30',
      };

      return (
        <div
          onClick={onClick}
          className={`bg-gradient-to-br ${colorClasses[color]} rounded-xl p-4 border ${onClick ? 'cursor-pointer hover:opacity-80 transition-opacity' : ''}`}
        >
          <div className="flex items-center justify-between mb-2">
            <span className="text-gray-400 text-sm">{label}</span>
            <Icon name={icon} size={18} className="text-gray-500" />
          </div>
          <div className="text-2xl font-bold text-white">{value}</div>
          {trend && <div className="text-xs text-gray-400 mt-1">{trend}</div>}
        </div>
      );
    };

    // ============ MAIN APPLICATION ============
    const App = () => {
      const [isAuthenticated, setIsAuthenticated] = useState(false);
      const [activeTab, setActiveTab] = useState('dashboard');
      const [data, setData] = useState(INITIAL_DATA);
      const [searchQuery, setSearchQuery] = useState('');
      const [modalState, setModalState] = useState({ isOpen: false, type: null, item: null, mode: 'add' });
      const [filterStatus, setFilterStatus] = useState('all');
      const [filterOwner, setFilterOwner] = useState('all');
      const [userRole, setUserRole] = useState('pm'); // 'pm', 'mgmt', 'artist'
      const [activeBandMember, setActiveBandMember] = useState('joel');
      const [detailModalItem, setDetailModalItem] = useState(null);
      const [selectedItemForDetail, setSelectedItemForDetail] = useState(null);
      const [sortConfig, setSortConfig] = useState({ key: null, direction: null });

      // Load data from localStorage
      useEffect(() => {
        const saved = localStorage.getItem('filmore-gear-data');
        if (saved) {
          try {
            setData(JSON.parse(saved));
          } catch (e) {
            console.error('Failed to parse saved data');
          }
        }
        const savedAuth = localStorage.getItem('filmore-gear-auth');
        if (savedAuth === 'true') setIsAuthenticated(true);
      }, []);

      // Save data to localStorage
      useEffect(() => {
        localStorage.setItem('filmore-gear-data', JSON.stringify(data));
      }, [data]);

      const handleLogin = () => {
        setIsAuthenticated(true);
        localStorage.setItem('filmore-gear-auth', 'true');
      };

      const handleLogout = () => {
        setIsAuthenticated(false);
        localStorage.removeItem('filmore-gear-auth');
      };

      const handleSaveItem = (item, category) => {
        setData(prev => {
          const list = [...(prev[category] || [])];
          const existingIndex = list.findIndex(i => i.id === item.id);
          if (existingIndex >= 0) {
            list[existingIndex] = { ...item, sheetCategory: category };
          } else {
            list.push({ ...item, sheetCategory: category });
          }
          return { ...prev, [category]: list };
        });
        setModalState({ isOpen: false, type: null, item: null, mode: 'add' });
      };

      const handleDeleteItem = (id, category) => {
        if (!confirm('Are you sure you want to delete this item?')) return;
        setData(prev => ({
          ...prev,
          [category]: prev[category].filter(item => item.id !== id)
        }));
      };

      const handleApproval = (id, status) => {
        setData(prev => ({
          ...prev,
          acquisitions: prev.acquisitions.map(item =>
            item.id === id ? { ...item, approval: status } : item
          )
        }));
      };

      // Sort handler for column sorting
      const handleSort = (key) => {
        setSortConfig(prev => {
          if (prev.key === key) {
            // Cycle: asc -> desc -> none
            if (prev.direction === 'asc') return { key, direction: 'desc' };
            if (prev.direction === 'desc') return { key: null, direction: null };
          }
          return { key, direction: 'asc' };
        });
      };

      // Sort items based on current sort config
      const sortItems = (items) => {
        if (!sortConfig.key || !sortConfig.direction) return items;

        return [...items].sort((a, b) => {
          let aVal = a[sortConfig.key];
          let bVal = b[sortConfig.key];

          // Handle null/undefined
          if (aVal == null) aVal = '';
          if (bVal == null) bVal = '';

          // Handle numbers
          if (typeof aVal === 'number' && typeof bVal === 'number') {
            return sortConfig.direction === 'asc' ? aVal - bVal : bVal - aVal;
          }

          // Handle strings
          aVal = String(aVal).toLowerCase();
          bVal = String(bVal).toLowerCase();

          if (sortConfig.direction === 'asc') {
            return aVal.localeCompare(bVal);
          } else {
            return bVal.localeCompare(aVal);
          }
        });
      };

      // Stats calculations
      const stats = useMemo(() => {
        const totalItems = data.inventory.length + data.joelGear.length + data.reidGear.length + data.drewGear.length;
        const needsMaintenance = [...data.inventory, ...data.joelGear, ...data.reidGear, ...data.drewGear].filter(i => i.status === 'Maintenance').length;
        const consumablesNeeded = data.consumables.filter(i => ['Needed', 'Need Soon'].includes(i.status)).length;
        const pendingAcquisitions = data.acquisitions.filter(i => i.approval === 'pending').length;
        const asapItems = data.acquisitions.filter(i => i.status === 'Acquire ASAP').length;
        
        return { totalItems, needsMaintenance, consumablesNeeded, pendingAcquisitions, asapItems };
      }, [data]);

      const filteredItems = useCallback((items, category) => {
        return items.filter(item => {
          const matchesSearch = !searchQuery || 
            item.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||
            item.id?.toLowerCase().includes(searchQuery.toLowerCase()) ||
            item.notes?.toLowerCase().includes(searchQuery.toLowerCase());
          
          const matchesFilter = filterStatus === 'all' || item.status === filterStatus;
          
          return matchesSearch && matchesFilter;
        });
      }, [searchQuery, filterStatus]);

      if (!isAuthenticated) {
        return <LoginScreen onLogin={handleLogin} />;
      }

      const tabs = [
        { id: 'dashboard', label: 'Dashboard', icon: 'LayoutDashboard' },
        { id: 'inventory', label: 'Inventory', icon: 'Package' },
        { id: 'consumables', label: 'Consumables', icon: 'Zap' },
        { id: 'acquisitions', label: 'Acquisitions', icon: 'ShoppingCart' },
        { id: 'flyPack', label: 'FLY Pack', icon: 'Plane' },
      ];

      const renderDashboard = () => (
        <div className="space-y-6">
          {/* Stats Grid */}
          <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
            <StatCard icon="Package" label="Total Items" value={stats.totalItems} color="amber" onClick={() => setActiveTab('inventory')} />
            <StatCard icon="Wrench" label="Maintenance" value={stats.needsMaintenance} color="red" trend="Items need attention" onClick={() => { setFilterStatus('Maintenance'); setActiveTab('inventory'); }} />
            <StatCard icon="Zap" label="Consumables" value={stats.consumablesNeeded} color="blue" trend="Need restocking" onClick={() => setActiveTab('consumables')} />
            <StatCard icon="ShoppingCart" label="Pending" value={stats.pendingAcquisitions} color="purple" trend="Awaiting approval" onClick={() => setActiveTab('acquisitions')} />
            <StatCard icon="AlertTriangle" label="ASAP Items" value={stats.asapItems} color="red" trend="Urgent acquisitions" onClick={() => setActiveTab('acquisitions')} />
          </div>

          {/* Quick Actions */}
          <div className="bg-dark-800 rounded-xl p-4 md:p-6 border border-dark-600">
            <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
              <Icon name="Zap" size={20} className="text-amber-400" />
              Quick Actions
            </h3>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
              <button onClick={() => setModalState({ isOpen: true, type: 'inventory', mode: 'add', item: null })} className="p-3 md:p-4 bg-dark-700 hover:bg-dark-600 rounded-xl border border-dark-600 transition-all group">
                <Icon name="Plus" size={24} className="text-emerald-400 mb-2" />
                <span className="text-xs md:text-sm text-gray-300 group-hover:text-white">Add Gear</span>
              </button>
              <button onClick={() => setModalState({ isOpen: true, type: 'consumables', mode: 'add', item: null })} className="p-3 md:p-4 bg-dark-700 hover:bg-dark-600 rounded-xl border border-dark-600 transition-all group">
                <Icon name="Zap" size={24} className="text-blue-400 mb-2" />
                <span className="text-xs md:text-sm text-gray-300 group-hover:text-white">Add Consumable</span>
              </button>
              <button onClick={() => setModalState({ isOpen: true, type: 'acquisitions', mode: 'add', item: null })} className="p-3 md:p-4 bg-dark-700 hover:bg-dark-600 rounded-xl border border-dark-600 transition-all group">
                <Icon name="ShoppingCart" size={24} className="text-purple-400 mb-2" />
                <span className="text-xs md:text-sm text-gray-300 group-hover:text-white">Add Acquisition</span>
              </button>
              <button onClick={() => setActiveTab('acquisitions')} className="p-3 md:p-4 bg-dark-700 hover:bg-dark-600 rounded-xl border border-dark-600 transition-all group">
                <Icon name="CheckCircle" size={24} className="text-amber-400 mb-2" />
                <span className="text-xs md:text-sm text-gray-300 group-hover:text-white">Review Approvals</span>
              </button>
            </div>
          </div>

          {/* Needs Attention */}
          <div className="grid md:grid-cols-2 gap-6">
            {/* Maintenance Items */}
            <div className="bg-dark-800 rounded-xl p-4 md:p-6 border border-dark-600">
              <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <Icon name="Wrench" size={20} className="text-amber-400" />
                Needs Maintenance
              </h3>
              <div className="space-y-2 max-h-60 overflow-y-auto">
                {[...data.inventory, ...data.joelGear, ...data.reidGear, ...data.drewGear]
                  .filter(i => i.status === 'Maintenance')
                  .map(item => (
                    <div
                      key={item.id}
                      onClick={() => { setFilterStatus('Maintenance'); setActiveTab('inventory'); }}
                      className="flex items-center justify-between p-3 bg-dark-700 rounded-lg cursor-pointer hover:bg-dark-600 transition-colors"
                    >
                      <div>
                        <span className="text-white font-medium">{item.name}</span>
                        <span className="text-gray-500 text-sm ml-2">#{item.id}</span>
                      </div>
                      <StatusBadge status={item.status} />
                    </div>
                  ))}
                {stats.needsMaintenance === 0 && (
                  <div className="text-center text-gray-500 py-4">All gear in good condition!</div>
                )}
              </div>
            </div>

            {/* ASAP Acquisitions */}
            <div className="bg-dark-800 rounded-xl p-4 md:p-6 border border-dark-600">
              <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <Icon name="AlertTriangle" size={20} className="text-red-400" />
                Acquire ASAP
              </h3>
              <div className="space-y-2 max-h-60 overflow-y-auto">
                {data.acquisitions.filter(i => i.status === 'Acquire ASAP').map(item => (
                  <div
                    key={item.id}
                    onClick={() => setDetailModalItem(item)}
                    className="flex items-center justify-between p-3 bg-dark-700 rounded-lg cursor-pointer hover:bg-dark-600 transition-colors"
                  >
                    <div>
                      <span className="text-white font-medium">{item.name}</span>
                      <span className="text-gray-500 text-sm ml-2">{item.buyPrice || item.rentalCost}</span>
                    </div>
                    <ApprovalBadge approval={item.approval} />
                  </div>
                ))}
                {stats.asapItems === 0 && (
                  <div className="text-center text-gray-500 py-4">No urgent acquisitions</div>
                )}
              </div>
            </div>
          </div>
        </div>
      );

      // Get all inventory items combined
      const getAllInventoryItems = () => {
        const filmore = data.inventory.map(i => ({ ...i, owner: 'FILMORE' }));
        const joel = data.joelGear.map(i => ({ ...i, owner: 'Joel' }));
        const reid = data.reidGear.map(i => ({ ...i, owner: 'Reid' }));
        const drew = data.drewGear.map(i => ({ ...i, owner: 'Drew' }));
        return [...filmore, ...joel, ...reid, ...drew];
      };

      const renderInventoryTable = () => {
        const allItems = getAllInventoryItems();
        const filteredInventory = allItems.filter(item => {
          const matchesStatus = filterStatus === 'all' || item.status === filterStatus;
          const matchesOwner = filterOwner === 'all' || item.owner === filterOwner;
          const matchesSearch = !searchQuery ||
            item.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||
            item.id?.toLowerCase().includes(searchQuery.toLowerCase()) ||
            item.notes?.toLowerCase().includes(searchQuery.toLowerCase()) ||
            item.packLocation?.toLowerCase().includes(searchQuery.toLowerCase());
          return matchesStatus && matchesOwner && matchesSearch;
        });

        // Apply sorting
        const sortedInventory = sortItems(filteredInventory);

        const ownerColors = {
          'FILMORE': 'bg-amber-500/20 text-amber-400',
          'Joel': 'bg-blue-500/20 text-blue-400',
          'Reid': 'bg-emerald-500/20 text-emerald-400',
          'Drew': 'bg-purple-500/20 text-purple-400',
        };

        return (
        <div className="space-y-4">
          <div className="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
            <div className="flex flex-wrap gap-2">
              <select
                value={filterStatus}
                onChange={e => setFilterStatus(e.target.value)}
                className="px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"
              >
                <option value="all">All Status</option>
                <option value="Good">Good</option>
                <option value="Maintenance">Maintenance</option>
                <option value="Damaged">Damaged</option>
                <option value="Unknown">Unknown</option>
              </select>
              <select
                value={filterOwner}
                onChange={e => setFilterOwner(e.target.value)}
                className="px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"
              >
                <option value="all">All Owners</option>
                <option value="FILMORE">FILMORE</option>
                <option value="Joel">Joel</option>
                <option value="Reid">Reid</option>
                <option value="Drew">Drew</option>
              </select>
            </div>
            <button
              onClick={() => setModalState({ isOpen: true, type: 'inventory', mode: 'add', item: null })}
              className="flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors"
            >
              <Icon name="Plus" size={18} />
              Add Item
            </button>
          </div>

          {/* Mobile Card View */}
          <div className="md:hidden space-y-3">
            {sortedInventory.map(item => (
              <div key={`${item.owner}-${item.id}`} className="bg-dark-800 rounded-xl p-4 border border-dark-600">
                <div className="flex items-start justify-between mb-2">
                  <div>
                    <span className="text-white font-medium">{item.name}</span>
                    <span className="text-gray-500 text-xs ml-2">#{item.id}</span>
                  </div>
                  <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${ownerColors[item.owner]}`}>{item.owner}</span>
                </div>
                <div className="flex flex-wrap gap-2 mb-2">
                  <StatusBadge status={item.status} />
                  <ShowTypeBadge showType={item.showType} />
                </div>
                <div className="flex items-center gap-1 text-xs mb-2">
                  <span className="text-gray-500">Location:</span>
                  <LocationBadge location={item.packLocation} />
                </div>
                {item.notes && <div className="text-xs text-gray-500 truncate">{item.notes}</div>}
                <div className="flex gap-2 mt-3 pt-3 border-t border-dark-600">
                  <button onClick={() => setModalState({ isOpen: true, type: 'inventory', mode: 'edit', item })} className="flex-1 py-2 text-center text-sm text-gray-400 hover:text-white bg-dark-700 rounded-lg">
                    Edit
                  </button>
                </div>
              </div>
            ))}
          </div>

          {/* Desktop Table View */}
          <div className="hidden md:block bg-dark-800 rounded-xl border border-dark-600 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-dark-700">
                  <tr>
                    <SortableHeader label="ID" sortKey="id" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Item Name" sortKey="name" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Owner" sortKey="owner" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Status" sortKey="status" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Stock" sortKey="stock" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Show Type" sortKey="showType" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Location" sortKey="packLocation" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Notes" sortKey="notes" currentSort={sortConfig} onSort={handleSort} />
                    <th className="px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-dark-600">
                  {sortedInventory.map(item => (
                    <tr key={`${item.owner}-${item.id}`} className="hover:bg-dark-700/50 transition-colors">
                      <td className="px-4 py-3 text-sm text-gray-300 font-mono">{item.id}</td>
                      <td className="px-4 py-3 text-sm text-white font-medium">{item.name}</td>
                      <td className="px-4 py-3">
                        <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${ownerColors[item.owner]}`}>{item.owner}</span>
                      </td>
                      <td className="px-4 py-3"><StatusBadge status={item.status} /></td>
                      <td className="px-4 py-3 text-sm text-gray-300">{item.stock || 'N/A'}</td>
                      <td className="px-4 py-3"><ShowTypeBadge showType={item.showType} /></td>
                      <td className="px-4 py-3"><LocationBadge location={item.packLocation} /></td>
                      <td className="px-4 py-3 text-sm text-gray-400 max-w-xs truncate">{item.notes || 'N/A'}</td>
                      <td className="px-4 py-3 text-right">
                        <div className="flex items-center justify-end gap-1">
                          <button onClick={() => setModalState({ isOpen: true, type: 'inventory', mode: 'edit', item })} className="p-2 text-gray-400 hover:text-white hover:bg-dark-600 rounded-lg transition-colors">
                            <Icon name="Pencil" size={16} />
                          </button>
                          <button onClick={() => handleDeleteItem(item.id, 'inventory')} className="p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors">
                            <Icon name="Trash2" size={16} />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        );
      };

      const renderConsumablesTable = () => {
        const filtered = filteredItems(data.consumables, 'consumables');
        const sortedConsumables = sortItems(filtered);

        return (
        <div className="space-y-4">
          <div className="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
            <div className="flex gap-2">
              <select
                value={filterStatus}
                onChange={e => setFilterStatus(e.target.value)}
                className="px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"
              >
                <option value="all">All Status</option>
                <option value="Full Stock">Full Stock</option>
                <option value="Needed">Needed</option>
                <option value="Need Soon">Need Soon</option>
                <option value="Additional">Additional</option>
              </select>
            </div>
            <button
              onClick={() => setModalState({ isOpen: true, type: 'consumables', mode: 'add', item: null })}
              className="flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors"
            >
              <Icon name="Plus" size={18} />
              Add Consumable
            </button>
          </div>

          {/* Mobile Card View */}
          <div className="md:hidden space-y-3">
            {sortedConsumables.map(item => (
              <div key={item.id} className="bg-dark-800 rounded-xl p-4 border border-dark-600">
                <div className="flex items-start justify-between mb-2">
                  <div>
                    <span className="text-white font-medium">{item.name}</span>
                    <span className="text-gray-500 text-xs ml-2">#{item.id}</span>
                  </div>
                  <StatusBadge status={item.status} />
                </div>
                <div className="grid grid-cols-2 gap-2 text-xs mb-2">
                  <div><span className="text-gray-500">Price:</span> <span className="text-emerald-400">{item.price || 'N/A'}</span></div>
                  <div><span className="text-gray-500">Needed:</span> <span className="text-white">{item.needed || 0}</span></div>
                </div>
                <div className="flex items-center justify-between">
                  <CategoryBadge category={item.category} />
                  {item.make && (
                    <a href={item.make} target="_blank" rel="noopener noreferrer" className="text-blue-400 text-xs flex items-center gap-1">
                      <Icon name="ExternalLink" size={12} /> Link
                    </a>
                  )}
                </div>
                {item.notes && <div className="text-xs text-gray-500 mt-2 pt-2 border-t border-dark-600">{item.notes}</div>}
                <div className="flex gap-2 mt-3 pt-3 border-t border-dark-600">
                  <button onClick={() => setModalState({ isOpen: true, type: 'consumables', mode: 'edit', item })} className="flex-1 py-2 text-center text-sm text-gray-400 hover:text-white bg-dark-700 rounded-lg">
                    Edit
                  </button>
                </div>
              </div>
            ))}
          </div>

          {/* Desktop Table View */}
          <div className="hidden md:block bg-dark-800 rounded-xl border border-dark-600 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-dark-700">
                  <tr>
                    <SortableHeader label="ID" sortKey="id" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Item Name" sortKey="name" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Status" sortKey="status" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Price" sortKey="price" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Needed" sortKey="needed" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Category" sortKey="category" currentSort={sortConfig} onSort={handleSort} />
                    <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">MAKE</th>
                    <SortableHeader label="Notes" sortKey="notes" currentSort={sortConfig} onSort={handleSort} />
                    <th className="px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-dark-600">
                  {sortedConsumables.map(item => (
                    <tr key={item.id} className="hover:bg-dark-700/50 transition-colors">
                      <td className="px-4 py-3 text-sm text-gray-300 font-mono">{item.id}</td>
                      <td className="px-4 py-3 text-sm text-white font-medium">{item.name}</td>
                      <td className="px-4 py-3"><StatusBadge status={item.status} /></td>
                      <td className="px-4 py-3 text-sm text-emerald-400 font-medium">{item.price || 'N/A'}</td>
                      <td className="px-4 py-3 text-sm text-white font-medium text-center">{item.needed || 0}</td>
                      <td className="px-4 py-3"><CategoryBadge category={item.category} /></td>
                      <td className="px-4 py-3">
                        {item.make ? (
                          <a href={item.make} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1 px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs hover:bg-blue-500/30 transition-colors">
                            <Icon name="ExternalLink" size={12} />
                            Link
                          </a>
                        ) : (
                          <span className="text-gray-500 text-xs">N/A</span>
                        )}
                      </td>
                      <td className="px-4 py-3 text-sm text-gray-400 max-w-xs truncate">{item.notes || 'N/A'}</td>
                      <td className="px-4 py-3 text-right">
                        <div className="flex items-center justify-end gap-1">
                          <button onClick={() => setModalState({ isOpen: true, type: 'consumables', mode: 'edit', item })} className="p-2 text-gray-400 hover:text-white hover:bg-dark-600 rounded-lg transition-colors">
                            <Icon name="Pencil" size={16} />
                          </button>
                          <button onClick={() => handleDeleteItem(item.id, 'consumables')} className="p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors">
                            <Icon name="Trash2" size={16} />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        );
      };

      const renderAcquisitionsTable = () => {
        const filtered = filteredItems(data.acquisitions, 'acquisitions');
        const sortedAcquisitions = sortItems(filtered);

        return (
        <div className="space-y-4">
          <div className="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
            <div className="flex gap-2 flex-wrap">
              <select
                value={filterStatus}
                onChange={e => setFilterStatus(e.target.value)}
                className="px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"
              >
                <option value="all">All Status</option>
                <option value="Acquire ASAP">Acquire ASAP</option>
                <option value="Needed">Needed</option>
                <option value="In the works">In the works</option>
                <option value="Additional">Additional</option>
                <option value="Un-Necessary">Un-Necessary</option>
              </select>
              <select
                value={userRole}
                onChange={e => setUserRole(e.target.value)}
                className="px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"
              >
                <option value="pm">View as: PM</option>
                <option value="mgmt">View as: Management</option>
                <option value="artist">View as: Artist</option>
              </select>
            </div>
            <button
              onClick={() => setModalState({ isOpen: true, type: 'acquisitions', mode: 'add', item: null })}
              className="flex items-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white font-medium rounded-lg transition-colors"
            >
              <Icon name="Plus" size={18} />
              Add Acquisition
            </button>
          </div>

          {/* Role info banner */}
          {(userRole === 'mgmt' || userRole === 'artist') && (
            <div className="bg-purple-500/10 border border-purple-500/30 rounded-lg p-4">
              <div className="flex items-center gap-2 text-purple-400">
                <Icon name="Shield" size={18} />
                <span className="font-medium">
                  {userRole === 'mgmt' ? 'Management View' : 'Artist View'} - You can approve or deny acquisition requests
                </span>
              </div>
            </div>
          )}

          {/* Mobile Card View */}
          <div className="md:hidden space-y-3">
            {sortedAcquisitions.map(item => (
              <div key={item.id} onClick={() => setDetailModalItem(item)} className="bg-dark-800 rounded-xl p-4 border border-dark-600 cursor-pointer active:bg-dark-700">
                <div className="flex items-start justify-between mb-2">
                  <div>
                    <span className="text-white font-medium">{item.name}</span>
                    <span className="text-gray-500 text-xs ml-2">#{item.id}</span>
                  </div>
                  <StatusBadge status={item.status} />
                </div>
                <div className="grid grid-cols-2 gap-2 text-xs mb-2">
                  <div><span className="text-gray-500">Buy:</span> <span className="text-emerald-400">{item.buyPrice || 'N/A'}</span></div>
                  <div><span className="text-gray-500">Rent:</span> <span className="text-amber-400">{item.rentalCost || 'N/A'}</span></div>
                  <div><span className="text-gray-500">Count:</span> <span className="text-white">{item.needed || 0}</span></div>
                  <div><CategoryBadge category={item.category} /></div>
                </div>
                {item.notes && <div className="text-xs text-gray-500 mb-2">{item.notes}</div>}
                <div className="flex items-center justify-between pt-2 border-t border-dark-600">
                  <ApprovalBadge approval={item.approval} />
                  {item.make && (
                    <a href={item.make} target="_blank" rel="noopener noreferrer" onClick={e => e.stopPropagation()} className="text-blue-400 text-xs flex items-center gap-1">
                      <Icon name="ExternalLink" size={12} /> Link
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>

          {/* Desktop Table View */}
          <div className="hidden md:block bg-dark-800 rounded-xl border border-dark-600 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-dark-700">
                  <tr>
                    <SortableHeader label="ID" sortKey="id" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Item Name" sortKey="name" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Status" sortKey="status" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="BUY" sortKey="buyPrice" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="RENT" sortKey="rentalCost" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="COUNT" sortKey="needed" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Category" sortKey="category" currentSort={sortConfig} onSort={handleSort} />
                    <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">MAKE</th>
                    <SortableHeader label="Approval" sortKey="approval" currentSort={sortConfig} onSort={handleSort} />
                    <th className="px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-dark-600">
                  {sortedAcquisitions.map(item => (
                    <tr key={item.id} className="hover:bg-dark-700/50 transition-colors cursor-pointer" onClick={() => setDetailModalItem(item)}>
                      <td className="px-4 py-3 text-sm text-gray-300 font-mono">{item.id}</td>
                      <td className="px-4 py-3">
                        <div>
                          <div className="text-sm text-white font-medium">{item.name}</div>
                          {item.notes && <div className="text-xs text-gray-500 truncate max-w-xs">{item.notes}</div>}
                        </div>
                      </td>
                      <td className="px-4 py-3"><StatusBadge status={item.status} /></td>
                      <td className="px-4 py-3 text-sm text-emerald-400 font-medium">{item.buyPrice || 'N/A'}</td>
                      <td className="px-4 py-3 text-sm text-amber-400 font-medium">{item.rentalCost || 'N/A'}</td>
                      <td className="px-4 py-3 text-sm text-white font-medium text-center">{item.needed || 0}</td>
                      <td className="px-4 py-3"><CategoryBadge category={item.category} /></td>
                      <td className="px-4 py-3" onClick={e => e.stopPropagation()}>
                        {item.make ? (
                          <a href={item.make} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-1 px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs hover:bg-blue-500/30 transition-colors">
                            <Icon name="ExternalLink" size={12} />
                            Link
                          </a>
                        ) : (
                          <span className="text-gray-500 text-xs">N/A</span>
                        )}
                      </td>
                      <td className="px-4 py-3"><ApprovalBadge approval={item.approval} /></td>
                      <td className="px-4 py-3 text-right" onClick={e => e.stopPropagation()}>
                        <div className="flex items-center justify-end gap-1">
                          {(userRole === 'mgmt' || userRole === 'artist') && item.approval === 'pending' && (
                            <>
                              <button onClick={() => handleApproval(item.id, 'approved')} className="p-2 text-gray-400 hover:text-emerald-400 hover:bg-emerald-500/10 rounded-lg transition-colors" title="Approve">
                                <Icon name="Check" size={16} />
                              </button>
                              <button onClick={() => handleApproval(item.id, 'denied')} className="p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors" title="Deny">
                                <Icon name="X" size={16} />
                              </button>
                            </>
                          )}
                          <button onClick={() => setModalState({ isOpen: true, type: 'acquisitions', mode: 'edit', item })} className="p-2 text-gray-400 hover:text-white hover:bg-dark-600 rounded-lg transition-colors">
                            <Icon name="Pencil" size={16} />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        );
      };

      // Handle FLY Pack item update
      const handleFlyPackUpdate = (itemId, field, value) => {
        setData(prev => ({
          ...prev,
          flyPack: prev.flyPack.map(item =>
            item.id === itemId ? { ...item, [field]: value } : item
          )
        }));
      };

      const renderFlyPack = () => {
        const people = ['Joel', 'Drew', 'Reid', 'Tyler', 'Guest'];
        const colorStyles = {
          Joel: { bg: 'bg-blue-500/20', border: 'border-blue-500/30', text: 'text-blue-400' },
          Drew: { bg: 'bg-emerald-500/20', border: 'border-emerald-500/30', text: 'text-emerald-400' },
          Reid: { bg: 'bg-amber-500/20', border: 'border-amber-500/30', text: 'text-amber-400' },
          Tyler: { bg: 'bg-red-500/20', border: 'border-red-500/30', text: 'text-red-400' },
          Guest: { bg: 'bg-purple-500/20', border: 'border-purple-500/30', text: 'text-purple-400' },
        };

        return (
        <div className="space-y-6">
          {/* Person Cards - Mobile responsive grid */}
          <div className="grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4">
            {people.map(person => {
              const checkedItems = data.flyPack.filter(i => i.checkedBag === person);
              const carryOnItems = data.flyPack.filter(i => i.carryOn === person);
              const style = colorStyles[person];

              return (
                <div key={person} className="bg-dark-800 rounded-xl border border-dark-600 overflow-hidden">
                  <div className={`${style.bg} ${style.border} border-b px-3 md:px-4 py-2 md:py-3`}>
                    <h3 className={`font-semibold ${style.text} text-sm md:text-base`}>{person}</h3>
                  </div>
                  <div className="p-3 md:p-4 space-y-3 md:space-y-4">
                    <div>
                      <h4 className="text-xs font-medium text-gray-500 uppercase mb-2">Checked ({checkedItems.length})</h4>
                      <div className="space-y-1">
                        {checkedItems.map(item => (
                          <div key={item.id} className="text-xs md:text-sm text-gray-300 py-1 px-2 bg-dark-700 rounded truncate">
                            {item.name}
                          </div>
                        ))}
                        {checkedItems.length === 0 && <span className="text-gray-600 text-xs">None</span>}
                      </div>
                    </div>
                    <div>
                      <h4 className="text-xs font-medium text-gray-500 uppercase mb-2">Carry-On ({carryOnItems.length})</h4>
                      <div className="space-y-1">
                        {carryOnItems.map(item => (
                          <div key={item.id} className="text-xs md:text-sm text-gray-300 py-1 px-2 bg-dark-700 rounded truncate">
                            {item.name}
                          </div>
                        ))}
                        {carryOnItems.length === 0 && <span className="text-gray-600 text-xs">None</span>}
                      </div>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>

          {/* Full FLY Pack List - Editable */}
          <div className="bg-dark-800 rounded-xl border border-dark-600 overflow-hidden">
            <div className="px-4 md:px-6 py-4 border-b border-dark-600 flex items-center justify-between">
              <h3 className="font-semibold text-white">Full FLY Pack List</h3>
              <button
                onClick={() => setModalState({ isOpen: true, type: 'flyPack', mode: 'add', item: null })}
                className="flex items-center gap-2 px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white text-sm font-medium rounded-lg transition-colors"
              >
                <Icon name="Plus" size={16} />
                Add Item
              </button>
            </div>

            {/* Mobile Card View */}
            <div className="md:hidden p-4 space-y-3">
              {data.flyPack.map(item => (
                <div key={item.id} className="bg-dark-700 rounded-lg p-3">
                  <div className="flex items-start justify-between mb-2">
                    <div>
                      <span className="text-white font-medium text-sm">{item.name}</span>
                      <span className="text-gray-500 text-xs ml-2">#{item.id}</span>
                    </div>
                  </div>
                  <div className="grid grid-cols-2 gap-2 text-xs">
                    <div>
                      <label className="text-gray-500 block mb-1">Checked Bag</label>
                      <select
                        value={item.checkedBag || ''}
                        onChange={e => handleFlyPackUpdate(item.id, 'checkedBag', e.target.value)}
                        className="w-full px-2 py-1 bg-dark-600 border border-dark-500 rounded text-white text-xs"
                      >
                        <option value="">None</option>
                        {people.map(p => <option key={p} value={p}>{p}</option>)}
                      </select>
                    </div>
                    <div>
                      <label className="text-gray-500 block mb-1">Carry-On</label>
                      <select
                        value={item.carryOn || ''}
                        onChange={e => handleFlyPackUpdate(item.id, 'carryOn', e.target.value)}
                        className="w-full px-2 py-1 bg-dark-600 border border-dark-500 rounded text-white text-xs"
                      >
                        <option value="">None</option>
                        {people.map(p => <option key={p} value={p}>{p}</option>)}
                      </select>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {/* Desktop Table View */}
            <div className="hidden md:block overflow-x-auto">
              <table className="w-full">
                <thead className="bg-dark-700">
                  <tr>
                    <SortableHeader label="ID" sortKey="id" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Item Name" sortKey="name" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Checked Bag" sortKey="checkedBag" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Carry-On" sortKey="carryOn" currentSort={sortConfig} onSort={handleSort} />
                    <SortableHeader label="Notes" sortKey="notes" currentSort={sortConfig} onSort={handleSort} />
                    <th className="px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-dark-600">
                  {sortItems(data.flyPack).map(item => (
                    <tr key={item.id} className="hover:bg-dark-700/50 transition-colors">
                      <td className="px-4 py-3 text-sm text-gray-300 font-mono">{item.id}</td>
                      <td className="px-4 py-3 text-sm text-white font-medium">{item.name}</td>
                      <td className="px-4 py-3">
                        <select
                          value={item.checkedBag || ''}
                          onChange={e => handleFlyPackUpdate(item.id, 'checkedBag', e.target.value)}
                          className={`px-2 py-1 border rounded text-sm ${item.checkedBag ? `${colorStyles[item.checkedBag]?.bg} ${colorStyles[item.checkedBag]?.border} ${colorStyles[item.checkedBag]?.text}` : 'bg-dark-700 border-dark-600 text-white'}`}
                        >
                          <option value="">None</option>
                          {people.map(p => <option key={p} value={p}>{p}</option>)}
                        </select>
                      </td>
                      <td className="px-4 py-3">
                        <select
                          value={item.carryOn || ''}
                          onChange={e => handleFlyPackUpdate(item.id, 'carryOn', e.target.value)}
                          className={`px-2 py-1 border rounded text-sm ${item.carryOn ? `${colorStyles[item.carryOn]?.bg} ${colorStyles[item.carryOn]?.border} ${colorStyles[item.carryOn]?.text}` : 'bg-dark-700 border-dark-600 text-white'}`}
                        >
                          <option value="">None</option>
                          {people.map(p => <option key={p} value={p}>{p}</option>)}
                        </select>
                      </td>
                      <td className="px-4 py-3 text-sm text-gray-400">{item.notes || 'N/A'}</td>
                      <td className="px-4 py-3 text-right">
                        <button onClick={() => setModalState({ isOpen: true, type: 'flyPack', mode: 'edit', item })} className="p-2 text-gray-400 hover:text-white hover:bg-dark-600 rounded-lg transition-colors">
                          <Icon name="Pencil" size={16} />
                        </button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        );
      };

      const renderBandGear = () => {
        const members = [
          { id: 'joel', name: 'Joel', data: data.joelGear, color: 'blue' },
          { id: 'reid', name: 'Reid', data: data.reidGear, color: 'amber' },
          { id: 'drew', name: 'Drew', data: data.drewGear, color: 'emerald' },
        ];
        const active = members.find(m => m.id === activeBandMember);

        const colorMap = {
          joel: { bg: 'bg-blue-500', hover: 'hover:bg-blue-600' },
          reid: { bg: 'bg-amber-500', hover: 'hover:bg-amber-600' },
          drew: { bg: 'bg-emerald-500', hover: 'hover:bg-emerald-600' },
        };

        return (
          <div className="space-y-4">
            <div className="flex gap-2">
              {members.map(member => (
                <button
                  key={member.id}
                  onClick={() => setActiveBandMember(member.id)}
                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                    activeBandMember === member.id
                      ? `${colorMap[member.id].bg} text-white`
                      : 'bg-dark-700 text-gray-400 hover:text-white'
                  }`}
                >
                  {member.name}'s Gear
                </button>
              ))}
            </div>

            <div className="bg-dark-800 rounded-xl border border-dark-600 overflow-hidden">
              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="bg-dark-700">
                    <tr>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">ID</th>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Item Name</th>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Status</th>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Stock</th>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Show Type</th>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Location</th>
                      <th className="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Notes</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-dark-600">
                    {active?.data.map(item => (
                      <tr key={item.id} className="hover:bg-dark-700/50 transition-colors">
                        <td className="px-4 py-3 text-sm text-gray-300 font-mono">{item.id}</td>
                        <td className="px-4 py-3 text-sm text-white font-medium">{item.name}</td>
                        <td className="px-4 py-3"><StatusBadge status={item.status} /></td>
                        <td className="px-4 py-3 text-sm text-gray-300">{item.stock}</td>
                        <td className="px-4 py-3 text-sm text-gray-300">{item.showType}</td>
                        <td className="px-4 py-3 text-sm text-gray-300">{item.packLocation}</td>
                        <td className="px-4 py-3 text-sm text-gray-400">{item.notes}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        );
      };

      const renderContent = () => {
        switch (activeTab) {
          case 'dashboard': return renderDashboard();
          case 'inventory': return renderInventoryTable();
          case 'consumables': return renderConsumablesTable();
          case 'acquisitions': return renderAcquisitionsTable();
          case 'flyPack': return renderFlyPack();
          default: return renderDashboard();
        }
      };

      return (
        <div className="min-h-screen bg-dark-900">
          {/* Sticky Header + Nav Container */}
          <div className="sticky top-0 z-40">
            {/* Header */}
            <header className="bg-dark-800 border-b border-dark-600">
              <div className="max-w-7xl mx-auto px-4 sm:px-6">
                <div className="flex items-center justify-between h-16">
                  <div className="flex items-center gap-3">
                    <img src="f-only-white.png" alt="FILMORE" className="w-10 h-10 object-contain" />
                    <div className="flex flex-col">
                      <img src="filmore-logo-white.png" alt="FILMORE" className="h-5 object-contain object-left" />
                      <p className="text-xs text-gray-500">Gear Inventory</p>
                    </div>
                  </div>

                  {/* Search */}
                  <div className="hidden md:flex flex-1 max-w-md mx-8">
                    <div className="relative w-full">
                      <Icon name="Search" size={18} className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" />
                      <input
                        type="text"
                        placeholder="Search gear..."
                        value={searchQuery}
                        onChange={e => setSearchQuery(e.target.value)}
                        className="w-full pl-10 pr-4 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-amber-500"
                      />
                    </div>
                  </div>

                  <button
                    onClick={handleLogout}
                    className="flex items-center gap-2 px-3 py-2 text-gray-400 hover:text-white hover:bg-dark-700 rounded-lg transition-colors"
                  >
                    <Icon name="LogOut" size={18} />
                    <span className="hidden sm:inline">Logout</span>
                  </button>
                </div>
              </div>
            </header>

            {/* Navigation Tabs - Sticky under header */}
            <nav className="bg-dark-800 border-b border-dark-600 overflow-x-auto">
              <div className="max-w-7xl mx-auto px-4 sm:px-6">
                <div className="flex gap-1 py-2">
                  {tabs.map(tab => (
                    <button
                      key={tab.id}
                      onClick={() => { setActiveTab(tab.id); setFilterStatus('all'); setSortConfig({ key: null, direction: null }); }}
                      className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${
                        activeTab === tab.id
                          ? 'bg-amber-500/20 text-amber-400 border border-amber-500/30'
                          : 'text-gray-400 hover:text-white hover:bg-dark-700'
                      }`}
                    >
                      <Icon name={tab.icon} size={18} />
                      {tab.label}
                    </button>
                  ))}
                </div>
              </div>
            </nav>

            {/* Mobile Search - Sticky under nav */}
            <div className="md:hidden px-4 py-3 bg-dark-800 border-b border-dark-600">
              <div className="relative">
                <Icon name="Search" size={18} className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" />
                <input
                  type="text"
                  placeholder="Search gear..."
                  value={searchQuery}
                  onChange={e => setSearchQuery(e.target.value)}
                  className="w-full pl-10 pr-4 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-amber-500"
                />
              </div>
            </div>
          </div>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto px-4 sm:px-6 py-6">
            {renderContent()}
          </main>

          {/* Modal */}
          <Modal
            isOpen={modalState.isOpen}
            onClose={() => setModalState({ isOpen: false, type: null, item: null, mode: 'add' })}
            title={`${modalState.mode === 'add' ? 'Add' : 'Edit'} ${modalState.type?.charAt(0).toUpperCase() + modalState.type?.slice(1) || 'Item'}`}
          >
            {modalState.type && (
              <ItemForm
                item={modalState.item}
                type={modalState.type}
                onSave={(item) => handleSaveItem(item, modalState.type)}
                onCancel={() => setModalState({ isOpen: false, type: null, item: null, mode: 'add' })}
              />
            )}
          </Modal>

          {/* Item Detail Modal */}
          <ItemDetailModal
            item={detailModalItem}
            isOpen={!!detailModalItem}
            onClose={() => setDetailModalItem(null)}
            onEdit={(item) => setModalState({ isOpen: true, type: 'acquisitions', mode: 'edit', item })}
          />
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
